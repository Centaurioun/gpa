2001-01-18  Werner Koch  <wk@gnupg.org>

	* gpapaintern.c, util.c (stpcpy): Removed.
	* w32-io.c (stpcpy): New.

Tue 16 Jan 2001 23:25 Jan van Heys <jan.van.heys@uni-essen.de>
                      Peter Gerwinski <peter@gerwinski.de>

        Copied relevant files from GPGME.

        * Makefile.am: added new files.

Mon 15 Jan 2001 28:30 Peter Gerwinski <peter@gerwinski.de>

        Re-wrote the GnuPG communication layer to use GPGME.

        * Makefile.am:
          (gpapatest_LDADD): added `-lgpgme'.

        * gpapa.c:
          (top level): let "gpapa.h" include the standard headers.
          (linecallback_refresh_pub): parameter list changed
          according to the new requirements of gpapa_call_gnupg();
          body changed accordingly.
          (linecallback_refresh_sec): likewise.
          (linecallback_id_sec): likewise.
          (linecallback_export_ownertrust): likewise.

        * gpapa.h: include standard headers.

        * gpapafile.c: 
          (top level): let "gpapa.h" include the standard headers.
          (linecallback_get_status): parameter list changed (see above).
          (status_check): pass status as a GpgStatusCode rather than a char*.
          (linecallback_get_signatures): parameter list changed (see above).

        * gpapaintern.c: rewritten. Use functions from GPGME for
          communication with GnuPG.
          (stpcpy): new function.

        * gpapaintern.h:
          (NO_STATUS): constant to indicate that something is _not_ a
          GPG status code.
          @@@@ This must be kept in sync with GPGME!

        * gpapapublickey.c:
          (linecallback_fingerprint): parameter list changed (see above).
          (linecallback_get_signatures): likewise.

        Cosmetical changes (GCS, etc.) in other files.

2000-12-20  Werner Koch  <wk@gnupg.org>

	Applied patches from Jan's tarball dated 2000-12-18.  

Mon 18 Dec 2000 Jan van Heys <jan.van.heys@uni-essen.de>
                Peter Gerwinski <peter@gerwinski.de>

        * gpapa.c:
          (gpapa_get_public_key_by_userID): new function.
          (gpapa_get_secret_key_by_userID): new function.
          (gpapa_create_key_pair): return the created public and
          secret keys.

        * gpapakey.c:
          (gpapa_key_set_expiry_date): function implemented.

        * gpapapublickey.c:
          (gpapa_public_key_get_keytrust),
          (gpapa_public_key_get_ownertrust): handle case 'q'.
          (gpapa_public_key_set_ownertrust): function implemented.
          (gpapa_public_key_delete): added confirmation to `gpg' call.

        * gpapasecretkey.c:
          (gpapa_secret_key_delete): added confirmation to `gpg' call.
          (gpapa_secret_key_create_revocation): function implemented.

        * gpapatest.c:
          (test_genkey),
          (test_gpapa_key_set_expiry_date): new functions.
          (main): call new functions.

Wed 25 Oct 2000 16:42 Jan van Heys <jan.van.heys@uni-essen.de>
                      Peter Gerwinski <peter@gerwinski.de>

        * gpapaintern.c: introduced "#define TEST_PASSPHRASE" hack
          to provide a dummy passphrase "test" for testing purposes.
          (spawn_gnupg): close the input pipe after writing the
          commands to it.
          (handle_status, handle_output_line): fixed bug which
          caused incomplete lines to jam the pipe i/o.

        * gpapa.c (gpapa_create_key_pair): function implemented.

        * gpapapublickey.c (gpapa_public_key_sign): function implemented.

2000-09-01  Werner Koch  <wk@gnupg.org>

	* gpapafile.c (status_check): Avoid extra allocation and made
	function more stable.  

	* gpapaintern.c: The whole thing has been restructed.

2000-08-30  Werner Koch  <wk@gnupg.org>

	* gpapaintern.c (spawn_gnupg): New. Started to rework the GnuPG
	invocation stuff for easier debugging of Windows problem.

2000-07-31 16:35:40  Werner Koch  (wk@habibti.openit.de)

  * gpapaintern.c (gpapa_call_gnupg) [MINGW32]: SetHandleInformation() is not
  available under Windows9[58]; so we do not print the error message.
  Fixed a stupid SEGV problem with fprintf.

2000-07-10 18:11:21  Werner Koch  (wk@habibti.openit.de)

  * build-dll, README: New.

  * gpapatest.c [MINGW32]: Implement xmalloc etc. here

2000-05-25 17:51:21  Werner Koch  (wk@habibti.openit.de)

  * gpapa.c (gpapa_init): Add gpg parameter.
  (gpapa_private_get_gpg_program): New.
  * gpapaintern.c (gpapa_call_gnupg): Use this new function.

2000-05-16 19:53:49  Werner Koch  (wk@habibti.openit.de)

  Ran "indent -gnu -sc" on all source files.

2000-05-16 17:38:06  Werner Koch  (wk@habibti.openit.de)

  * gpapaintern.c (gpapa_call_gnupg) [MINGW32]: Some stuff works now.

2000-05-11 16:54:10  Werner Koch  (wk@habibti.openit.de)

  * gpapaintern.c (gpapa_call_gnupg) [MINGW32]: Dummy code for W32.
    Excluded one header for W32.

10 May 2000 26:56 Peter Gerwinski <peter.gerwinski@g-n-u.de>

  All non-interactive parts of the public and secret key editors work.
  Encrypting, decrypting, and signing files works.

2000-05-02 19:45:30  Werner Koch  (wk@habibti.openit.de)

  Replaced all concat() by xstrcat2().	Replaced some parameters named
  index by idx to avoid compiler warnings due to the index(3).

2000-05-02 18:32:57  Werner Koch  (wk@habibti.openit.de)

  * Makefile.am: New.

  Included the config.h as the header of each .c file.	Removed
  the libiberty.h header.

Wed 26 Apr 2000 26:07 Peter Gerwinski <peter.gerwinski@g-n-u.de>

  * gpapa.c: re-implemented key ring extraction to keep them in
    memory.  This is much faster for now but does not scale well
    and must be replaced by something more sophisticated in the
    future.

Wed 26 Apr 2000 12:53 Peter Gerwinski <peter.gerwinski@g-n-u.de>

  * m: create an `.a'.

  * upload: new file.

Wed 26 Apr 2000 10:10 Peter Gerwinski <peter.gerwinski@g-n-u.de>

  * gpapaintern.c: gpapa_call_gnupg(): get the passphrase as an
    additional parameter instead of using a callback.

Tue 25 Apr 2000 26:25 Peter Gerwinski <peter.gerwinski@g-n-u.de>

  Signing works.

  * gpapaintern.c: gpapa_call_gnupg() can handle passphrases.
    In fact for the way it is implemented, the callback is not
    necessary.	Do we want to keep it?

Tue 25 Apr 2000 14:00 Peter Gerwinski <peter.gerwinski@g-n-u.de>

  Getting information about keys works, including fingerprints
  and such, but not including signatures and such.

Sun 23 Apr 2000 28:00 Peter Gerwinski <peter.gerwinski@g-n-u.de>

  * gpapaintern.c: gpapa_call_gnupg() works.

Sat 22 Apr 2000 Peter Gerwinski <peter.gerwinski@g-n-u.de>

  Started implementing.

Thu 20 Apr 2000 Markus Gerwinski <markus.gerwinski@sercon.de>

  Finished design.

Tue 18 Apr 2000 Markus Gerwinski <markus.gerwinski@sercon.de>

  Started with design.	Created the name "GPAPA".

Wed 5 Apr 2000 Markus Gerwinski <markus.gerwinski@sercon.de>

  Wrote down requirements.

Tu 16 May 2000 Markus Gerwinski <markus.gerwinski@sercon.de>

  - Did a lot of major changes in the header of gpapa_create_key_pair.
  - Detached methods set_expiry_date and set_expiry_time from class
    GpapaSecretKey and attached them to GpapaKey.
